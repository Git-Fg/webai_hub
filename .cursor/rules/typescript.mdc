---
description: TypeScript workflow rules for AI Hybrid Hub (auto-attached when editing ts_src/**)
globs: ts_src/**/*.ts
alwaysApply: false
---
## TypeScript Workflow — MANDATORY

- After ANY modification in `ts_src/**`, you MUST run:
  - `npm run validate:ts`

## Why

- This command lints, type-checks, and compiles TS in `ts_src/` to `assets/js/bridge.js`, which the Flutter WebView loads.
- If you forget this step, Dart→JS calls may fail and UI behavior will reflect the previous bundle.

## Additional Guidance

- Never modify `assets/js/bridge.js` directly. It is generated.
- If dependencies change: `npm install` then `npm run validate:ts`.
- Update CSS selectors with care; prefer stable anchors.
- Keep code clear and self-documenting; add `// WHY:` and `// TIMING:` comments only when non-obvious.
